<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Display a web map using an alternate projection</title>
  <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no">
  <link href="https://api.mapbox.com/mapbox-gl-js/v2.14.1/mapbox-gl.css" rel="stylesheet">
  <script src="https://api.mapbox.com/mapbox-gl-js/v2.14.1/mapbox-gl.js"></script>
  <style>
    body { margin: 0; padding: 0; }
    #map { position: absolute; top: 0; bottom: 0; width: 100%; }
  </style>
</head>
<body>
<div id="map"></div>
<script>
  // TO MAKE THE MAP APPEAR YOU MUST
  // ADD YOUR ACCESS TOKEN FROM
  // https://account.mapbox.com
  mapboxgl.accessToken = 'pk.eyJ1Ijoiam9zZXBoLWZ1ZW50ZXMiLCJhIjoiY2xneTVkenFwMDY1MTNybXByMzQ2dGxrNSJ9._QSQviIA9ehq6USyE39N1A';
  const map = new mapboxgl.Map({
    container: 'map',
// Choose from Mapbox's core styles, or make your own style with Mapbox Studio
    style: 'mapbox://styles/mapbox/streets-v12',
    center: [-73.84043,
      40.66273],
    zoom: 3,
    projection: 'globe' // starting projection
  });
  map.on('load', () => {
    map.addSource('places', {
      'type': 'geojson',
      'data': {
        'type': 'FeatureCollection',
        'features': [
          {
            'type': 'Feature',
            'properties': {
              'description':
                      '<strong>New Park Pizza</strong><p>Want a good slice? Head down Howard Beach, and make sure to  stop by New Park Pizza. Grab a slice and stay a while. Remember Cash only!</p>'
            },
            'geometry': {
              'type': 'Point',
              'coordinates': [-73.84043, 40.66273]
            }
          },
          {
            'type': 'Feature',
            'properties': {
              'description':
                      '<strong>Goldee\'s BBQ </strong><p> Best BBQ in Texas hands down.  </p>'
            },
            'geometry': {
              'type': 'Point',
              'coordinates': [-97.23399, 32.62141]
            }
          },
          {
            'type': 'Feature',
            'properties': {
              'description':
                      '<strong>Fran Landing</strong><p> Merica Food. </p>'
            },
            'geometry': {
              'type': 'Point',
              'coordinates': [-77.1957, 42.12074]
            }
          }
        ]
      }
    });
// Add a layer showing the places.
    map.addLayer({
      'id': 'places',
      'type': 'circle',
      'source': 'places',
      'paint': {
        'circle-color': '#4264fb',
        'circle-radius': 6,
        'circle-stroke-width': 2,
        'circle-stroke-color': '#ffffff'
      }
    });

// When a click event occurs on a feature in the places layer, open a popup at the
// location of the feature, with description HTML from its properties.
    map.on('click', 'places', (e) => {
// Copy coordinates array.
      const coordinates = e.features[0].geometry.coordinates.slice();
      const description = e.features[0].properties.description;

// Ensure that if the map is zoomed out such that multiple
// copies of the feature are visible, the popup appears
// over the copy being pointed to.
      while (Math.abs(e.lngLat.lng - coordinates[0]) > 180) {
        coordinates[0] += e.lngLat.lng > coordinates[0] ? 360 : -360;
      }

      new mapboxgl.Popup()
              .setLngLat(coordinates)
              .setHTML(description)
              .addTo(map);
    });

// Change the cursor to a pointer when the mouse is over the places layer.
    map.on('mouseenter', 'places', () => {
      map.getCanvas().style.cursor = 'pointer';
    });

// Change it back to a pointer when it leaves.
    map.on('mouseleave', 'places', () => {
      map.getCanvas().style.cursor = '';
    });
  });
  // const nav = new mapboxgl.NavigationControl();
  // map.addControl(nav, 'top-left');
  //
  // // Marker for three different restaurant
  // const marker = new mapboxgl.Marker()
  //         .setLngLat([-73.84043,
  //           40.66273])
  //         .addTo(map);
  // const marker2 = new mapboxgl.Marker()
  //         .setLngLat([-97.23399,
  //           32.62141])
  //         .addTo(map);
  // const marker3 = new mapboxgl.Marker()
  //         .setLngLat([-77.1957,
  //           42.12074])
  //         .addTo(map);

  // This is for the Popups
  // const popup = new mapboxgl.Popup({ closeOnClick: false })
  //         .setLngLat([-73.84043,
  //           40.66273])
  //         .setHTML('<h1>DA BEST PIZZA!</h1>')
  //         .addTo(map);
  // const popup2 = new mapboxgl.Popup({ closeOnClick: false })
  //         .setLngLat([-97.23399,
  //           32.62141])
  //         .setHTML('<h1>DA BEST BBQ!</h1>')
  //         .addTo(map);
  // const popup3 = new mapboxgl.Popup({ closeOnClick: false })
  //         .setLngLat([-77.1957,
  //           42.12074])
  //         .setHTML('<h1>DA BEST FISH!</h1>')
  //         .addTo(map);

</script>

</body>
</html>